__NUXT_JSONP__("/2025-04-23-refactoring-my-symfony-7-app-to-use-events", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC){return {data:[{article:{slug:"2025-04-23-refactoring-my-symfony-7-app-to-use-events",title:"Refactoring my Symfony application to use EventSubscriber",bg:"bg-green-600",decoration:"decoration-green-600",createdAt:ai,updatedAt:ai,toc:[],body:{type:"root",children:[{type:b,tag:s,props:{},children:[{type:a,value:"One of my side projects is a Symfony 7 application with a large notification subsystem. Notifications can be sent by push and\u002For email depending on the event, to users or admins or both, which requires slightly different logic and notification templates. Each notification must respect the user's settings in a preference system for which notifications a user or admin would like to receive. Additionally, each notification that is sent is added to a seperate user searchable audit log."}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"Over time, this notification system has become quite large and arguably one of the most important aspects of the system. Up until now, I've been calling into this service directly from controllers and services. Which has been more or less ok, except now the notification and audit calls have become larger and more prevalent throughout the codebase. Meaning a big part of any service that should notify gets gunked up by calls into the notification and audit services."}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"Naturally, notifications are sent after certain domain events occur, such as a booking being made."}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"My system now has an event object for each of these domain events that is fired from a service. For example, "},{type:b,tag:r,props:{},children:[{type:a,value:S}]},{type:a,value:x}]},{type:a,value:h},{type:b,tag:H,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,L]},children:[{type:b,tag:r,props:{},children:[{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,M,m]},children:[{type:a,value:S}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:"extends"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"Event"}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,u,i]},children:[{type:a,value:T}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:E}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:F}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m,B]},children:[{type:a,value:aj}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"$booking"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,u,i]},children:[{type:a,value:"getBooking"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m,y]},children:[{type:a,value:aj}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:U}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,V,g]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,aa]},children:[{type:a,value:"booking"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:h}]}]}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"I have a single "},{type:b,tag:r,props:{},children:[{type:a,value:"EventSubscriber"}]},{type:a,value:", "},{type:b,tag:r,props:{},children:[{type:a,value:ak}]},{type:a,value:" that subscribes to all events that require a notification:"}]},{type:a,value:h},{type:b,tag:H,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,L]},children:[{type:b,tag:r,props:{},children:[{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,M,m]},children:[{type:a,value:ak}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:al}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"EventSubscriberInterface"}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,u,i]},children:[{type:a,value:T}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:E}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:F}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m,B]},children:[{type:a,value:ab}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"$registry"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:"static"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,u,i]},children:[{type:a,value:"getSubscribedEvents"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g,y]},children:[{type:a,value:"array"}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:U}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,an]},children:[{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ac}]}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ao}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ap,aq]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,an]},children:[{type:a,value:"Etc"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ac}]}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ao}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ap,aq]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,u,i]},children:[{type:a,value:"onNotifiableEvent"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,g,P]},children:[{type:a,value:G}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g,y]},children:[{type:a,value:ad}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:as}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,V,g]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,aa]},children:[{type:a,value:"registry"}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:at}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:au}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:h}]}]}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"In the above, you can see there is a "},{type:b,tag:r,props:{},children:[{type:a,value:ab}]},{type:a,value:", this is just a good encapsulation for finding all the handlers for each notification and is incredibly succinct thanks to the magic of Symfony's "},{type:b,tag:"a",props:{href:"https:\u002F\u002Fsymfony.com\u002Fdoc\u002Fcurrent\u002Fservice_container\u002Fautowiring.html",rel:["nofollow","noopener","noreferrer"],target:"_blank"},children:[{type:a,value:"Autowiring"}]},{type:a,value:x}]},{type:a,value:h},{type:b,tag:H,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,L]},children:[{type:b,tag:r,props:{},children:[{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,M,m]},children:[{type:a,value:ab}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,ae,Z]},children:[{type:a,value:"\u002F**\n     * "},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:"@param"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:R},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:X}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,av]},children:[{type:a,value:af}]},{type:a,value:"\n     *\u002F"}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,u,i]},children:[{type:a,value:T}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,ae,Z]},children:[{type:a,value:aw},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:ax}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ag}]},{type:a,value:"\u003CNotificationHandlerInterface\u003E *\u002F"}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,ay]},children:[{type:b,tag:c,props:{className:[d,_,e]},children:[{type:a,value:az}]},{type:b,tag:c,props:{className:[d,aA]},children:[{type:b,tag:c,props:{className:[d,ah,m]},children:[{type:a,value:"AutowireIterator"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,ah,m]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,"constant"]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]}]},{type:b,tag:c,props:{className:[d,_,e]},children:[{type:a,value:X}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:E}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:F}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g,B]},children:[{type:a,value:ag}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:af}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,u,i]},children:[{type:a,value:at}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,g,P]},children:[{type:a,value:G}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g,y]},children:[{type:a,value:ag}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:as}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,V,g]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,aa]},children:[{type:a,value:"handlers"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:au}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:aB}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n                "},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:"yield"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:h}]}]}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"Symfony will find any class implementing the below "},{type:b,tag:r,props:{},children:[{type:a,value:R}]},{type:a,value:" and stick it in the "},{type:b,tag:r,props:{},children:[{type:a,value:af}]},{type:a,value:" iterable"}]},{type:a,value:h},{type:b,tag:H,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,L]},children:[{type:b,tag:r,props:{},children:[{type:b,tag:c,props:{className:[d,ay]},children:[{type:b,tag:c,props:{className:[d,_,e]},children:[{type:a,value:az}]},{type:b,tag:c,props:{className:[d,aA]},children:[{type:b,tag:c,props:{className:[d,ah,m]},children:[{type:a,value:"AutoconfigureTag"}]}]},{type:b,tag:c,props:{className:[d,_,e]},children:[{type:a,value:X}]}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:"interface"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,M,m]},children:[{type:a,value:R}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,u,i]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,g,P]},children:[{type:a,value:G}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g,y]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,u,i]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,g,P]},children:[{type:a,value:G}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g,y]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:h}]}]}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"Each of which will be asked if it supports the given event and will have it's "},{type:b,tag:r,props:{},children:[{type:a,value:Y}]},{type:a,value:" method called if it says yes."}]},{type:a,value:h},{type:b,tag:H,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,L]},children:[{type:b,tag:r,props:{},children:[{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,M,m]},children:[{type:a,value:"BookingHandler"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:al}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:R}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,u,i]},children:[{type:a,value:T}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:E}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:F}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m,B]},children:[{type:a,value:"ClientNotifier"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"$clientNotifier"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:E}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:F}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m,B]},children:[{type:a,value:"StaffNotifier"}]},{type:a,value:"  "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"$staffNotifier"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:E}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:F}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m,B]},children:[{type:a,value:"AuditLog"}]},{type:a,value:"       "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"$auditLog"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,u,i]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,g,P]},children:[{type:a,value:G}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g,y]},children:[{type:a,value:aC}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:U}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:v}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:"instanceof"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,u,i]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,ae,Z]},children:[{type:a,value:aw},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:ax}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,av]},children:[{type:a,value:v}]},{type:a,value:" BookingEvent *\u002F"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g,B]},children:[{type:a,value:G}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g,y]},children:[{type:a,value:ad}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:aB}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"!"}]},{type:b,tag:c,props:{className:[d,V,g]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:"\n\n        "},{type:b,tag:c,props:{className:[d,Z]},children:[{type:a,value:"\u002F\u002F masses of notification code"}]},{type:a,value:n},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:h}]}]}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"Now all of my notification code is lifted out of my services code and replaced with a single call to "},{type:b,tag:r,props:{},children:[{type:a,value:"$dispatcher-\u003Edispatch(new BookingEvent())"}]},{type:a,value:"."}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"It's also much easier to test notifications and as a bonus, I can now see at a glance all the notifications that the system handles in one place."}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"Further down the road when I'm ready to move to a messaging queue or event bus type system, it will be a piece of cake to adapt this subsystem to that architecture."}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"Pretty happy with it overall."}]}]},dir:"\u002Farticles",path:"\u002Farticles\u002F2025-04-23-refactoring-my-symfony-7-app-to-use-events",extension:".md"}}],fetch:{},mutations:void 0}}("text","element","span","token","punctuation"," ","keyword","\n","function","variable","(",")","class-name","\n    ","{","}","\n        ","code","p","public","function-definition","$event","operator",":","return-type",";","class","type-declaration","\n\n    ","-\u003E","private","readonly","object","div","nuxt-content-highlight","pre","language-php","line-numbers","class-name-definition","\n            ",",","type-hint","$handler","NotificationHandlerInterface","BookingEvent","__construct","return","this","$this","]","handle","comment","delimiter","supports","property","NotificationHandlerRegistry","::","void","doc-comment","$handlers","iterable","attribute-class-name","2025-04-23T00:00:00.000Z","Booking","NotificationSubscriber","implements","[","scope","=\u003E","string","single-quoted-string","'onNotifiableEvent'","foreach","getHandlersFor","as","parameter","\u002F** ","@var","attribute","#[","attribute-content","if","bool")));