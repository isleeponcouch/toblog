__NUXT_JSONP__("/2024-04-04-exploring-state-in-jetpack-compose", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU){return {data:[{article:{slug:"2024-04-04-exploring-state-in-jetpack-compose",title:"Exploring State in Jetpack Compose",bg:"bg-indigo-300",createdAt:aw,updatedAt:aw,toc:[{id:ax,depth:$,text:"The difference between = and by remember mutableStateOf"},{id:ay,depth:$,text:"Remembering remember"},{id:az,depth:$,text:aA}],body:{type:"root",children:[{type:b,tag:j,props:{},children:[{type:a,value:"I'm new to Jetpack Compose development and while I've been working reasonably productively on a Compose project I've found myself trusting in the magic of Compose in some places more than what I'm comfortable with in terms of my own knowledge."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"So in this post I'm exploring more of how state works in Jetpack Compose."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Declarative UI shifts the UI development workflow from precedural step-by-step instructions on how to build and manipuilate what the user sees to modelling a state that when mutated will update the UI to reflect the change."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"In Jetpack Compose, this is done with composable functions and in most cases "},{type:b,tag:g,props:{},children:[{type:a,value:"MutableState\u003CT\u003E"}]},{type:a,value:". We can however observe other types of state, as long as when we bind that state to our composable we do so as a "},{type:b,tag:g,props:{},children:[{type:a,value:aB}]},{type:a,value:". So although we may have other types we can use to model our state, such as LiveData and MutableStateFlows, at the point at which these types trigger a recomposition in Compose they're a "},{type:b,tag:g,props:{},children:[{type:a,value:aB}]},{type:a,value:"; so for the purposes of this post, we can limit our scope to MutableState."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"State is generally added to our composables using code similar to this:"}]},{type:a,value:f},{type:b,tag:z,props:{className:[A]},children:[{type:b,tag:B,props:{className:[C,D]},children:[{type:b,tag:g,props:{},children:[{type:b,tag:c,props:{className:[d,R,S]},children:[{type:a,value:M}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:K}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"HelloWorld"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:E}]},{type:a,value:" greeting "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:v}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w,x]},children:[{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"Hello\""}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:U},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:o}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,w,x]},children:[{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\""}]},{type:b,tag:c,props:{className:[d,X]},children:[{type:b,tag:c,props:{className:[d,O,e]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:aC}]}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:", World!\""}]}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Any change to "},{type:b,tag:g,props:{},children:[{type:a,value:aC}]},{type:a,value:" in the code above will trigger a recomposition of our "},{type:b,tag:g,props:{},children:[{type:a,value:"HelloWorld()"}]},{type:a,value:" composable."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"This post is really about exploring what happens in the single line of code "},{type:b,tag:g,props:{},children:[{type:a,value:"var greeting by remember { mutableStateOf(\"Hello\")}"}]},{type:a,value:" which we sometimes might see written with an "},{type:b,tag:g,props:{},children:[{type:a,value:o}]},{type:a,value:ab},{type:b,tag:g,props:{},children:[{type:a,value:v}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:ac,props:{id:ax},children:[{type:b,tag:ad,props:{ariaHidden:ae,href:"#the-difference-between--and-by-remember-mutablestateof",tabIndex:af},children:[{type:b,tag:c,props:{className:[ag,ah]},children:[]}]},{type:a,value:"The difference between "},{type:b,tag:g,props:{},children:[{type:a,value:o}]},{type:a,value:ai},{type:b,tag:g,props:{},children:[{type:a,value:v}]},{type:a,value:" remember mutableStateOf"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"The practical difference between "},{type:b,tag:g,props:{},children:[{type:a,value:"= remember"}]},{type:a,value:ai},{type:b,tag:g,props:{},children:[{type:a,value:"by remember"}]},{type:a,value:" is that when you use "},{type:b,tag:g,props:{},children:[{type:a,value:v}]},{type:a,value:" you no longer need to access the .value property of your variable explicitly. So "},{type:b,tag:g,props:{},children:[{type:a,value:"if (foo.value) { }"}]},{type:a,value:" becomes simply "},{type:b,tag:g,props:{},children:[{type:a,value:"if (foo) {}"}]},{type:a,value:" and our code becomes prettier and more concise."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"For example:"}]},{type:a,value:f},{type:b,tag:z,props:{className:[A]},children:[{type:b,tag:B,props:{className:[C,D]},children:[{type:b,tag:g,props:{},children:[{type:b,tag:c,props:{className:[d,R,S]},children:[{type:a,value:M}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:K}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:Z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aj}]},{type:a,value:ak},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:o}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w,x]},children:[{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:U},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:o}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,w,x]},children:[{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,X]},children:[{type:b,tag:c,props:{className:[d,O,e]},children:[{type:a,value:"${"}]},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:a},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:am}]},{type:b,tag:c,props:{className:[d,O,e]},children:[{type:a,value:q}]}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:an}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]},{type:a,value:ao},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:o}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aq}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:"\n            text"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:aD},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:o}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,w,x]},children:[{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:L}]}]},{type:a,value:_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Becomes:"}]},{type:a,value:f},{type:b,tag:z,props:{className:[A]},children:[{type:b,tag:B,props:{className:[C,D]},children:[{type:b,tag:g,props:{},children:[{type:b,tag:c,props:{className:[d,R,S]},children:[{type:a,value:M}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:K}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:Z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:E}]},{type:a,value:ak},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:v}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w,x]},children:[{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:U},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:o}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,w,x]},children:[{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,X]},children:[{type:b,tag:c,props:{className:[d,O,e]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:a}]}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:an}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]},{type:a,value:ao},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:o}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aq}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:aE},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:o}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,w,x]},children:[{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:L}]}]},{type:a,value:_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Going past the visible code outcome and looking more into what's going on behind the scenes"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"When we move from:"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{},children:[{type:a,value:"val foo = remember { mutableStateOf(\"bar\") }"}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"To:"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{},children:[{type:a,value:"var foo by remember { mutableStateOf(\"bar\") }"}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Changing "},{type:b,tag:g,props:{},children:[{type:a,value:o}]},{type:a,value:ar},{type:b,tag:g,props:{},children:[{type:a,value:v}]},{type:a,value:" moves from an assignment to a property delegation. Property delegation is a Kotlin feature that delegates the getting and setting of a property to an intermediate object."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"This is a cool feature of Kotlin and it's worth taking a moment to think about what's going on here. Above, we have to change "},{type:b,tag:g,props:{},children:[{type:a,value:E}]},{type:a,value:ar},{type:b,tag:g,props:{},children:[{type:a,value:aj}]},{type:a,value:". At a first take this seems kind of unnecessary, if our delegate is a reference type why do we need to use a "},{type:b,tag:g,props:{},children:[{type:a,value:E}]},{type:a,value:as}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"It's because we're not actually assigning anything here. When we use "},{type:b,tag:g,props:{},children:[{type:a,value:v}]},{type:a,value:" we're not assigning a delegate to "},{type:b,tag:g,props:{},children:[{type:a,value:aF}]},{type:a,value:", we're telling Kotlin there's a delegate somewhere we want to be "},{type:b,tag:"strong",props:{},children:[{type:a,value:"responsible"}]},{type:a,value:" for "},{type:b,tag:g,props:{},children:[{type:a,value:aF}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"It's easily understood when seeing what the Kotlin compiler does when we use "},{type:b,tag:g,props:{},children:[{type:a,value:v}]},{type:a,value:". If we write something like:"}]},{type:a,value:f},{type:b,tag:z,props:{className:[A]},children:[{type:b,tag:B,props:{className:[C,D]},children:[{type:b,tag:g,props:{},children:[{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aG}]},{type:a,value:aH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:E}]},{type:a,value:aI},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:" String "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:v}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"The compiler will generate something like:"}]},{type:a,value:f},{type:b,tag:z,props:{className:[A]},children:[{type:b,tag:B,props:{className:[C,D]},children:[{type:b,tag:g,props:{},children:[{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aG}]},{type:a,value:aH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"private"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aj}]},{type:a,value:" text$delegate "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:o}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:E}]},{type:a,value:aI},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:" String\n        "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"get"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:o}]},{type:a,value:aK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:at}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aL}]},{type:a,value:a},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:_},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"set"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:am},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:" String"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:o}]},{type:a,value:aK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:au}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aL}]},{type:a,value:a},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]},{type:a,value:aM},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"So our delegate gets stored in a private property "},{type:b,tag:g,props:{},children:[{type:a,value:"text$delegate"}]},{type:a,value:" and our getters and setters call its "},{type:b,tag:g,props:{},children:[{type:a,value:at}]},{type:a,value:ai},{type:b,tag:g,props:{},children:[{type:a,value:au}]},{type:a,value:" methods."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Our "},{type:b,tag:g,props:{},children:[{type:a,value:Q}]},{type:a,value:" (returned by "},{type:b,tag:g,props:{},children:[{type:a,value:"mutableStateOf()"}]},{type:a,value:") delegate just redirects to the "},{type:b,tag:g,props:{},children:[{type:a,value:am}]},{type:a,value:" property:"}]},{type:a,value:f},{type:b,tag:z,props:{className:[A]},children:[{type:b,tag:B,props:{className:[C,D]},children:[{type:b,tag:g,props:{},children:[{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aN}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:h}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:K}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:G}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:I}]},{type:a,value:" MutableState"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:G}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:au}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aO},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:aP},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:as}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:aR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:G}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aS}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]},{type:a,value:aM},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:" T"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:aD},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:o}]},{type:a,value:aT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n\n"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aN}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:h}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:K}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:G}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:I}]},{type:a,value:" State"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:G}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:at}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aO},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:aP},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:as}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:aR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:G}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aS}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:" T "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:o}]},{type:a,value:aT}]}]}]},{type:a,value:f},{type:b,tag:ac,props:{id:ay},children:[{type:b,tag:ad,props:{ariaHidden:ae,href:"#remembering-remember",tabIndex:af},children:[{type:b,tag:c,props:{className:[ag,ah]},children:[]}]},{type:a,value:"Remembering "},{type:b,tag:g,props:{},children:[{type:a,value:J}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Let's remember that "},{type:b,tag:g,props:{},children:[{type:a,value:J}]},{type:a,value:" is needed so our values will survive recomposition. If we rewrote our "},{type:b,tag:g,props:{},children:[{type:a,value:Z}]},{type:a,value:" composable above and removed the "},{type:b,tag:g,props:{},children:[{type:a,value:J}]},{type:a,value:" whenever we tapped 'Foo' it would never change to 'Bar' because the update of our MutableState would cause a recomposition which would then ironically cause our value to be lost and set right back to 'Foo' on every tap."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Below is the source code for "},{type:b,tag:g,props:{},children:[{type:a,value:J}]},{type:a,value:u}]},{type:a,value:f},{type:b,tag:z,props:{className:[A]},children:[{type:b,tag:B,props:{className:[C,"language-swift"]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"inline fun "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:G}]},{type:b,tag:c,props:{className:[d,av]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:I}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:J}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:"crossinline calculation"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,"attribute","atrule"]},children:[{type:a,value:"@DisallowComposableCalls"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"-\u003E"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,av]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,av]},children:[{type:a,value:H}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:o}]},{type:a,value:"\n    currentComposer"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,"boolean"]},children:[{type:a,value:"false"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]},{type:a,value:" calculation"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"So we can see when we call remember we lift the lambda out of the composable and onto the "},{type:b,tag:g,props:{},children:[{type:a,value:aU}]},{type:a,value:" property on currentComposer."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"For this to make sense we need to know that when you add the "},{type:b,tag:g,props:{},children:[{type:a,value:M}]},{type:a,value:" annotation to your composable function it rewrites it to accept a "},{type:b,tag:g,props:{},children:[{type:a,value:"Composer"}]},{type:a,value:" parameter:"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"So"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{},children:[{type:a,value:"@Composable fun FooBar() {"}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"becomes"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{},children:[{type:a,value:"fun FooBar($composer: Composer) {"}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"The compiler also does the same for any call to a composable function within that function, which includes "},{type:b,tag:g,props:{},children:[{type:a,value:J}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"When recomposition happens, if we've used remember, the current Composer is passed back into our composable function and its remember function and we have access to our same value that was stored during initial composition again."}]},{type:a,value:f},{type:b,tag:ac,props:{id:az},children:[{type:b,tag:ad,props:{ariaHidden:ae,href:"#wrapping-up",tabIndex:af},children:[{type:b,tag:c,props:{className:[ag,ah]},children:[]}]},{type:a,value:aA}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Reading backwards through the line:"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{},children:[{type:a,value:"var foo by remember { mutableStateOf(\"Foo\") }"}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"from:"}]},{type:a,value:f},{type:b,tag:z,props:{className:[A]},children:[{type:b,tag:B,props:{className:[C,D]},children:[{type:b,tag:g,props:{},children:[{type:b,tag:c,props:{className:[d,R,S]},children:[{type:a,value:M}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:K}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:Z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:E}]},{type:a,value:ak},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:v}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w,x]},children:[{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:U},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:o}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,w,x]},children:[{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,X]},children:[{type:b,tag:c,props:{className:[d,O,e]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:a}]}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:an}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]},{type:a,value:ao},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:o}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aq}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:aE},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:o}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,w,x]},children:[{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:L}]}]},{type:a,value:_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"On initial composition, we get a "},{type:b,tag:g,props:{},children:[{type:a,value:Q}]},{type:a,value:" for our string "},{type:b,tag:g,props:{},children:[{type:a,value:F}]},{type:a,value:" by calling "},{type:b,tag:g,props:{},children:[{type:a,value:N}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"We store that in a lambda which "},{type:b,tag:g,props:{},children:[{type:a,value:J}]},{type:a,value:" adds to a cache on the Composer object that will be passed into it from its containing composable."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"We create a delegate with "},{type:b,tag:g,props:{},children:[{type:a,value:v}]},{type:a,value:" that makes our MutableState less verbose to work with."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"When we change the value of our "},{type:b,tag:g,props:{},children:[{type:a,value:Q}]},{type:a,value:" from "},{type:b,tag:g,props:{},children:[{type:a,value:F}]},{type:a,value:ar},{type:b,tag:g,props:{},children:[{type:a,value:L}]},{type:a,value:" we trigger recomposition."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"When our Composable is recompositioned the composer containing our lambda which contains our "},{type:b,tag:g,props:{},children:[{type:a,value:Q}]},{type:a,value:" which now holds "},{type:b,tag:g,props:{},children:[{type:a,value:L}]},{type:a,value:ab},{type:b,tag:g,props:{},children:[{type:a,value:F}]},{type:a,value:" is passed back into it and our "},{type:b,tag:g,props:{},children:[{type:a,value:"Text()"}]},{type:a,value:" now shows "},{type:b,tag:g,props:{},children:[{type:a,value:L}]},{type:a,value:ab},{type:b,tag:g,props:{},children:[{type:a,value:F}]},{type:a,value:" too, because our triggering "},{type:b,tag:g,props:{},children:[{type:a,value:Q}]},{type:a,value:" was "},{type:b,tag:g,props:{},children:[{type:a,value:"remembered"}]},{type:a,value:" instead of being recreated."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"And while this semi-detailed account still skips over a lot of detail, that's essentially how our state is being handled in Compose."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Breaking it down this way has helped me understand the code I'm writing in Compose a lot better. If you've stumbled upon this post, I hope it's done the same for you â€“ if not, soz mate."}]}]},dir:"\u002Farticles",path:"\u002Farticles\u002F2024-04-04-exploring-state-in-jetpack-compose",extension:".md"}}],fetch:{},mutations:void 0}}("text","element","span","token","punctuation","\n","code","operator"," ","p","keyword","function","(",")","=","string","}","{",".","\n    ",":","by","string-literal","singleline",",","div","nuxt-content-highlight","pre","line-numbers","language-kotlin","var","\"Foo\"","\u003C","T","\u003E","remember","fun","\"Bar\"","@Composable","mutableStateOf","interpolation-punctuation","this","MutableState","annotation","builtin"," remember ","\n\n    ","Text","\n        text ","interpolation","expression","FooBar","\n        ",2,"$"," instead of ","h2","a","true",-1,"icon","icon-link"," and ","val"," text ","\"Hello, would you like some ","value","?\"","\n        modifier "," Modifier","clickable"," to ","?","getValue","setValue","class-name","2024-04-04T00:00:00.000Z","the-difference-between--and-by-remember-mutablestateof","remembering-remember","wrapping-up","Wrapping up","State\u003CT\u003E","greeting","value ","\n            text ","foo","class"," FooBar "," text","FooBarTextDelegate"," text$delegate","::"," value","inline","thisObj"," Any"," property"," KProperty","*"," value\n","cache")));