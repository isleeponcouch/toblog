<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content=""><meta data-n-head="ssr" name="format-detection" content="telephone=no"><title>Brisbane based software engineer's blog about Swift, Kotlin, PHP, and croissants.</title><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="preload" href="/_nuxt/141fe53.js" as="script"><link rel="preload" href="/_nuxt/43ca708.js" as="script"><link rel="preload" href="/_nuxt/3e08e2f.js" as="script"><link rel="preload" href="/_nuxt/3a249ae.js" as="script"><link rel="preload" href="/_nuxt/be996ed.js" as="script"><style data-vue-ssr-id="d706d280:0 15f0552d:0 49569972:0">*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 transparent;--tw-ring-shadow:0 0 transparent;--tw-shadow:0 0 transparent;--tw-shadow-colored:0 0 transparent;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 transparent;--tw-ring-shadow:0 0 transparent;--tw-shadow:0 0 transparent;--tw-shadow-colored:0 0 transparent;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/*! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-tap-highlight-color:transparent}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-feature-settings:normal;font-size:1em;font-variation-settings:normal}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-feature-settings:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]:where(:not([hidden=until-found])){display:none}.static{position:static}.m-1{margin:.25rem}.m-4{margin:1rem}.mx-4{margin-left:1rem;margin-right:1rem}.mx-auto{margin-left:auto;margin-right:auto}.my-1{margin-bottom:.25rem;margin-top:.25rem}.my-10{margin-bottom:2.5rem;margin-top:2.5rem}.my-2{margin-bottom:.5rem;margin-top:.5rem}.my-3{margin-bottom:.75rem;margin-top:.75rem}.mb-2{margin-bottom:.5rem}.mb-4{margin-bottom:1rem}.mr-4{margin-right:1rem}.inline-block{display:inline-block}.flex{display:flex}.grid{display:grid}.h-6{height:1.5rem}.w-6{width:1.5rem}.max-w-2xl{max-width:42rem}.max-w-4xl{max-width:56rem}.gap-4{gap:1rem}.space-y-20>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:0;margin-bottom:calc(5rem*var(--tw-space-y-reverse));margin-top:5rem;margin-top:calc(5rem*(1 - var(--tw-space-y-reverse)))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:0;margin-bottom:calc(1.5rem*var(--tw-space-y-reverse));margin-top:1.5rem;margin-top:calc(1.5rem*(1 - var(--tw-space-y-reverse)))}.rounded{border-radius:.25rem}.rounded-b{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.border-t-4{border-top-width:4px}.bg-blue-300{--tw-bg-opacity:1;background-color:#93c5fd;background-color:rgba(147,197,253,var(--tw-bg-opacity,1))}.bg-blue-600{--tw-bg-opacity:1;background-color:#2563eb;background-color:rgba(37,99,235,var(--tw-bg-opacity,1))}.bg-blue-700{--tw-bg-opacity:1;background-color:#1d4ed8;background-color:rgba(29,78,216,var(--tw-bg-opacity,1))}.bg-blue-800{--tw-bg-opacity:1;background-color:#1e40af;background-color:rgba(30,64,175,var(--tw-bg-opacity,1))}.bg-cyan-300{--tw-bg-opacity:1;background-color:#67e8f9;background-color:rgba(103,232,249,var(--tw-bg-opacity,1))}.bg-cyan-600{--tw-bg-opacity:1;background-color:#0891b2;background-color:rgba(8,145,178,var(--tw-bg-opacity,1))}.bg-cyan-700{--tw-bg-opacity:1;background-color:#0e7490;background-color:rgba(14,116,144,var(--tw-bg-opacity,1))}.bg-cyan-800{--tw-bg-opacity:1;background-color:#155e75;background-color:rgba(21,94,117,var(--tw-bg-opacity,1))}.bg-emerald-300{--tw-bg-opacity:1;background-color:#6ee7b7;background-color:rgba(110,231,183,var(--tw-bg-opacity,1))}.bg-emerald-600{--tw-bg-opacity:1;background-color:#059669;background-color:rgba(5,150,105,var(--tw-bg-opacity,1))}.bg-emerald-700{--tw-bg-opacity:1;background-color:#047857;background-color:rgba(4,120,87,var(--tw-bg-opacity,1))}.bg-emerald-800{--tw-bg-opacity:1;background-color:#065f46;background-color:rgba(6,95,70,var(--tw-bg-opacity,1))}.bg-fuchsia-600{--tw-bg-opacity:1;background-color:#c026d3;background-color:rgba(192,38,211,var(--tw-bg-opacity,1))}.bg-gray-300{--tw-bg-opacity:1;background-color:#d1d5db;background-color:rgba(209,213,219,var(--tw-bg-opacity,1))}.bg-gray-600{--tw-bg-opacity:1;background-color:#4b5563;background-color:rgba(75,85,99,var(--tw-bg-opacity,1))}.bg-gray-700{--tw-bg-opacity:1;background-color:#374151;background-color:rgba(55,65,81,var(--tw-bg-opacity,1))}.bg-gray-800{--tw-bg-opacity:1;background-color:#1f2937;background-color:rgba(31,41,55,var(--tw-bg-opacity,1))}.bg-green-300{--tw-bg-opacity:1;background-color:#86efac;background-color:rgba(134,239,172,var(--tw-bg-opacity,1))}.bg-green-600{--tw-bg-opacity:1;background-color:#16a34a;background-color:rgba(22,163,74,var(--tw-bg-opacity,1))}.bg-green-700{--tw-bg-opacity:1;background-color:#15803d;background-color:rgba(21,128,61,var(--tw-bg-opacity,1))}.bg-green-800{--tw-bg-opacity:1;background-color:#166534;background-color:rgba(22,101,52,var(--tw-bg-opacity,1))}.bg-indigo-300{--tw-bg-opacity:1;background-color:#a5b4fc;background-color:rgba(165,180,252,var(--tw-bg-opacity,1))}.bg-indigo-600{--tw-bg-opacity:1;background-color:#4f46e5;background-color:rgba(79,70,229,var(--tw-bg-opacity,1))}.bg-indigo-700{--tw-bg-opacity:1;background-color:#4338ca;background-color:rgba(67,56,202,var(--tw-bg-opacity,1))}.bg-indigo-800{--tw-bg-opacity:1;background-color:#3730a3;background-color:rgba(55,48,163,var(--tw-bg-opacity,1))}.bg-lime-300{--tw-bg-opacity:1;background-color:#bef264;background-color:rgba(190,242,100,var(--tw-bg-opacity,1))}.bg-orange-300{--tw-bg-opacity:1;background-color:#fdba74;background-color:rgba(253,186,116,var(--tw-bg-opacity,1))}.bg-orange-600{--tw-bg-opacity:1;background-color:#ea580c;background-color:rgba(234,88,12,var(--tw-bg-opacity,1))}.bg-orange-700{--tw-bg-opacity:1;background-color:#c2410c;background-color:rgba(194,65,12,var(--tw-bg-opacity,1))}.bg-orange-800{--tw-bg-opacity:1;background-color:#9a3412;background-color:rgba(154,52,18,var(--tw-bg-opacity,1))}.bg-pink-300{--tw-bg-opacity:1;background-color:#f9a8d4;background-color:rgba(249,168,212,var(--tw-bg-opacity,1))}.bg-pink-600{--tw-bg-opacity:1;background-color:#db2777;background-color:rgba(219,39,119,var(--tw-bg-opacity,1))}.bg-pink-700{--tw-bg-opacity:1;background-color:#be185d;background-color:rgba(190,24,93,var(--tw-bg-opacity,1))}.bg-pink-800{--tw-bg-opacity:1;background-color:#9d174d;background-color:rgba(157,23,77,var(--tw-bg-opacity,1))}.bg-purple-300{--tw-bg-opacity:1;background-color:#d8b4fe;background-color:rgba(216,180,254,var(--tw-bg-opacity,1))}.bg-purple-600{--tw-bg-opacity:1;background-color:#9333ea;background-color:rgba(147,51,234,var(--tw-bg-opacity,1))}.bg-purple-700{--tw-bg-opacity:1;background-color:#7e22ce;background-color:rgba(126,34,206,var(--tw-bg-opacity,1))}.bg-purple-800{--tw-bg-opacity:1;background-color:#6b21a8;background-color:rgba(107,33,168,var(--tw-bg-opacity,1))}.bg-rose-300{--tw-bg-opacity:1;background-color:#fda4af;background-color:rgba(253,164,175,var(--tw-bg-opacity,1))}.bg-rose-600{--tw-bg-opacity:1;background-color:#e11d48;background-color:rgba(225,29,72,var(--tw-bg-opacity,1))}.bg-rose-700{--tw-bg-opacity:1;background-color:#be123c;background-color:rgba(190,18,60,var(--tw-bg-opacity,1))}.bg-rose-800{--tw-bg-opacity:1;background-color:#9f1239;background-color:rgba(159,18,57,var(--tw-bg-opacity,1))}.bg-sky-300{--tw-bg-opacity:1;background-color:#7dd3fc;background-color:rgba(125,211,252,var(--tw-bg-opacity,1))}.bg-sky-600{--tw-bg-opacity:1;background-color:#0284c7;background-color:rgba(2,132,199,var(--tw-bg-opacity,1))}.bg-sky-700{--tw-bg-opacity:1;background-color:#0369a1;background-color:rgba(3,105,161,var(--tw-bg-opacity,1))}.bg-sky-800{--tw-bg-opacity:1;background-color:#075985;background-color:rgba(7,89,133,var(--tw-bg-opacity,1))}.bg-teal-300{--tw-bg-opacity:1;background-color:#5eead4;background-color:rgba(94,234,212,var(--tw-bg-opacity,1))}.bg-teal-600{--tw-bg-opacity:1;background-color:#0d9488;background-color:rgba(13,148,136,var(--tw-bg-opacity,1))}.bg-teal-700{--tw-bg-opacity:1;background-color:#0f766e;background-color:rgba(15,118,110,var(--tw-bg-opacity,1))}.bg-teal-800{--tw-bg-opacity:1;background-color:#115e59;background-color:rgba(17,94,89,var(--tw-bg-opacity,1))}.bg-violet-300{--tw-bg-opacity:1;background-color:#c4b5fd;background-color:rgba(196,181,253,var(--tw-bg-opacity,1))}.bg-violet-600{--tw-bg-opacity:1;background-color:#7c3aed;background-color:rgba(124,58,237,var(--tw-bg-opacity,1))}.bg-violet-700{--tw-bg-opacity:1;background-color:#6d28d9;background-color:rgba(109,40,217,var(--tw-bg-opacity,1))}.bg-yellow-300{--tw-bg-opacity:1;background-color:#fde047;background-color:rgba(253,224,71,var(--tw-bg-opacity,1))}.bg-yellow-600{--tw-bg-opacity:1;background-color:#ca8a04;background-color:rgba(202,138,4,var(--tw-bg-opacity,1))}.bg-yellow-700{--tw-bg-opacity:1;background-color:#a16207;background-color:rgba(161,98,7,var(--tw-bg-opacity,1))}.bg-yellow-800{--tw-bg-opacity:1;background-color:#854d0e;background-color:rgba(133,77,14,var(--tw-bg-opacity,1))}.fill-current{fill:currentColor}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-4{padding:1rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.py-1{padding-bottom:.25rem;padding-top:.25rem}.py-16{padding-bottom:4rem;padding-top:4rem}.py-3{padding-bottom:.75rem;padding-top:.75rem}.text-left{text-align:left}.text-center{text-align:center}.align-middle{vertical-align:middle}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-thin{font-weight:100}.text-gray-300{--tw-text-opacity:1;color:#d1d5db;color:rgba(209,213,219,var(--tw-text-opacity,1))}.text-white{--tw-text-opacity:1;color:#fff;color:rgba(255,255,255,var(--tw-text-opacity,1))}.underline{text-decoration-line:underline}.decoration-blue-600{text-decoration-color:#2563eb}.decoration-cyan-600{text-decoration-color:#0891b2}.decoration-emerald-600{text-decoration-color:#059669}.decoration-fuchsia-600{text-decoration-color:#c026d3}.decoration-gray-600{text-decoration-color:#4b5563}.decoration-green-600{text-decoration-color:#16a34a}.decoration-indigo-600{text-decoration-color:#4f46e5}.decoration-orange-600{text-decoration-color:#ea580c}.decoration-pink-600{text-decoration-color:#db2777}.decoration-purple-600{text-decoration-color:#9333ea}.decoration-rose-600{text-decoration-color:#e11d48}.decoration-sky-600{text-decoration-color:#0284c7}.decoration-teal-600{text-decoration-color:#0d9488}.decoration-violet-600{text-decoration-color:#7c3aed}.decoration-yellow-600{text-decoration-color:#ca8a04}.shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color);box-shadow:0 0 transparent,0 0 transparent,0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);box-shadow:var(--tw-ring-offset-shadow,0 0 transparent),var(--tw-ring-shadow,0 0 transparent),var(--tw-shadow)}body{background:#131313}.nuxt-content-highlight{background:#181818;border-radius:4px;color:#d9d9d9;padding:14px}.language-text{background:#181818!important}.nuxt-content p code{background:#222;color:#d9d9d9}.nuxt-content p{text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;color:#d9d9d9;display:block;font-size:18px;font-style:normal;font-weight:400;letter-spacing:-.003em;line-height:28px;margin:1.56em 0 -.46em;word-break:break-word}.nuxt-content a{color:#999;-webkit-text-decoration:underline;text-decoration:underline}.nuxt-content a:hover{background:#333;color:#efefef}.nuxt-content ul{color:#d9d9d9;list-style-position:inside}.nuxt-content li{color:#d9d9d9;list-style-type:square}.nuxt-content h2{color:#fff;font-size:20px;font-weight:600}.nuxt-content h3,.nuxt-content h4{border-left:3px solid #333;color:#fff;font-size:18px;font-weight:600;padding-left:10px}pre{color:#fff!important;text-shadow:none!important}.token,pre{background:0 0!important}@media (min-width:768px){.md\:m-12{margin:3rem}.md\:my-3{margin-bottom:.75rem;margin-top:.75rem}.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\:p-12{padding:3rem}.md\:py-40{padding-bottom:10rem;padding-top:10rem}.md\:text-right{text-align:right}.md\:text-2xl{font-size:1.5rem;line-height:2rem}.md\:text-4xl{font-size:2.25rem;line-height:2.5rem}.md\:text-base{font-size:1rem;line-height:1.5rem}.md\:font-medium{font-weight:500}}code[class*=language-],pre[class*=language-]{background:0 0;color:#000;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;text-shadow:0 1px #fff;white-space:pre;word-break:normal;word-spacing:normal;word-wrap:normal;-webkit-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{background:#b3d4fc;text-shadow:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{background:#b3d4fc;text-shadow:none}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.nuxt-progress{background-color:#000;height:2px;left:0;opacity:1;position:fixed;right:0;top:0;transition:width .1s,opacity .4s;width:0;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}</style><link rel="preload" href="/_nuxt/static/1743752110/2024-06-09-date-and-time-programming/state.js" as="script"><link rel="preload" href="/_nuxt/static/1743752110/2024-06-09-date-and-time-programming/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1743752110/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><article class="m-4 md:m-12"><div class="grid md:grid-cols-2 gap-4"><div class="text-left font-medium text-white"><a href="https://umount.dev"><span class="inline-block py-1 px-3 rounded align-middle text-center bg-fuchsia-600">â†µ</span> umount.dev</a></div> <div class="text-center md:text-right"></div></div> <header class="p-4 py-16 md:p-12 md:py-40 text-center text-white my-10 space-y-20"><div class="max-w-4xl mx-auto"><h1 class="text-xl md:text-4xl font-thin mb-4">Date and Time Programming</h1> <p class="md:font-medium text-sm md:text-base rounded inline-block p-1 px-4 bg-fuchsia-600">Published June 9, 2024</p> <!----></div></header> <!----> <div class="max-w-2xl mx-auto space-y-6 nuxt-content"><p>Dates, times and timezones are a thing that at first seem straight forward, before you realise they're not. Before beginning to think they're not that bad, before realising again, actually they are that bad.</p>
<p>Almost all developers out there 'know' that best practice for dates, or more so the best way around dates, is to store everything in the database as UTC and convert back to the timezone you want to display or otherwise make use of when you pull it back out.</p>
<p>But there are <a href="https://derickrethans.nl/storing-date-time-in-database.html" rel="nofollow noopener noreferrer" target="_blank">plenty</a> <a href="https://codeblog.jonskeet.uk/2019/03/27/storing-utc-is-not-a-silver-bullet/" rel="nofollow noopener noreferrer" target="_blank">of</a> <a href="https://www.creativedeletion.com/2015/03/19/persisting_future_datetimes.html" rel="nofollow noopener noreferrer" target="_blank">articles</a> out there explaining why this isn't the panacea of date programming that it's made out to be. The TL;DR of that is when you store something as UTC you do so from a source timezone and for a bunch of practicle reasons that timezone might change from underneath you when you pull the date back out.</p>
<p>So let's look at some timezone things.</p>
<h2 id="how-mysql-knows-what-time-it-is"><a href="#how-mysql-knows-what-time-it-is" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>How MySQL knows what time it is</h2>
<p>MySQL grabs the timezone from the system it's running on and stores it in a <code>system_time_zone</code> <a href="https://dev.mysql.com/doc/refman/8.4/en/time-zone-support.html" rel="nofollow noopener noreferrer" target="_blank">variable</a>, it then sets the <code>time_zone</code> variable to represent the time that MySQL itself is using, which by default is <code>SYSTEM</code> which means use whatever <code>system_time_zone</code> is set to. These two values don't have to match, you can have your database running in a different timezone than your system, but typically they do. The <code>time_zone</code> variable is split into global and session variables, global meaning exactly what it sounds like and session being a per-connection timezone setting.</p>
<p>We can see what these are currently set to using the query: <code>SELECT @@GLOBAL.time_zone, @@SESSION.time_zone;</code>. When I do that on my local machine, we see the typical setup...</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-sql"><code>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> @<span class="token variable">@GLOBAL.time_zone</span><span class="token punctuation">,</span> @<span class="token variable">@SESSION.time_zone</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------------+---------------------+</span>
<span class="token operator">|</span> @<span class="token variable">@GLOBAL.time_zone</span> <span class="token operator">|</span> @<span class="token variable">@SESSION.time_zone</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------+---------------------+</span>
<span class="token operator">|</span> SYSTEM             <span class="token operator">|</span> SYSTEM              <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------+---------------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre></div>
<p>There are a bunch of timezone related command line arguments that can be passed onto MySQL when starting it, but they're just another way of setting the variables above.</p>
<h3 id="mysql-date--time-column-types"><a href="#mysql-date--time-column-types" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>MySQL Date & Time Column Types</h3>
<p>MySQL has the following types for representing dates and times.</p>
<ul>
<li><code>DATETIME</code></li>
<li><code>TIMESTAMP</code></li>
<li><code>DATE</code></li>
<li><code>TIME</code></li>
</ul>
<p>There's also <code>YEAR</code> but let's just leave it out.</p>
<p>So let's do a quick and dirty test on these column types with some timezone monkey business and see what happens...</p>
<p>Let's start off by getting the timezone for the session into UTC+10:00 (Brisbane/Australia) by doing <code>SET SESSION time_zone = '+10:00';</code></p>
<p>We'll work with this table for the tests:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> tests <span class="token punctuation">(</span>dt_col <span class="token keyword">datetime</span><span class="token punctuation">,</span> ts_col <span class="token keyword">timestamp</span><span class="token punctuation">,</span> date_col <span class="token keyword">date</span><span class="token punctuation">,</span> time_col <span class="token keyword">time</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>And insert some data.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> tests <span class="token punctuation">(</span>dt_col<span class="token punctuation">,</span> ts_col<span class="token punctuation">,</span> date_col<span class="token punctuation">,</span> time_col<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'2024-10-10'</span><span class="token punctuation">,</span> <span class="token string">'10:10'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-sql"><code>mysql<span class="token operator">></span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tests<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">---------------------+---------------------+------------+----------+</span>
<span class="token operator">|</span> dt_col              <span class="token operator">|</span> ts_col              <span class="token operator">|</span> date_col   <span class="token operator">|</span> time_col <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------+---------------------+------------+----------+</span>
<span class="token operator">|</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">18</span>:<span class="token number">37</span>:<span class="token number">54</span> <span class="token operator">|</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">18</span>:<span class="token number">37</span>:<span class="token number">54</span> <span class="token operator">|</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">10</span> <span class="token operator">|</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------+---------------------+------------+----------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre></div>
<p>Looks as expected. The datetime column and the timestamp column both got the current timestamp from <code>NOW()</code> (on a side note, the timestamp would've received the same value if we set it to null or left it out of the query altogether, it's a MySQL feature that the first <code>TIMESTAMP</code> in a table updates on inserts and updates).</p>
<p>Now that we have some data, let's set the timezone back to GMT (UTC+00:00) and see what happens...</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-sql"><code><span class="token keyword">SET</span> <span class="token keyword">SESSION</span> time_zone <span class="token operator">=</span> <span class="token string">'+00:00'</span><span class="token punctuation">;</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-sql"><code>mysql<span class="token operator">></span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tests<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">---------------------+---------------------+------------+----------+</span>
<span class="token operator">|</span> dt_col              <span class="token operator">|</span> ts_col              <span class="token operator">|</span> date_col   <span class="token operator">|</span> time_col <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------+---------------------+------------+----------+</span>
<span class="token operator">|</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">18</span>:<span class="token number">37</span>:<span class="token number">54</span> <span class="token operator">|</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">08</span>:<span class="token number">37</span>:<span class="token number">54</span> <span class="token operator">|</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">10</span> <span class="token operator">|</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------+---------------------+------------+----------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>
</code></pre></div>
<p>Our data stayed the same, except for the timestamp column. <code>TIMESTAMP</code> is a zone-sensitive value, from the MySQL docs <em>"Values for TIMESTAMP columns are converted from the session time zone to UTC for storage, and from UTC to the session time zone for retrieval."</em>.</p>
<p>So then why after the insert do we see the timestamp column set to the same value as the datetime column. The select statement is a retrieval, so although MySQL is storing the timestamp as UTC internally, we'll never 'see' that in our queries. The <code>NOW()</code> function is also zone-sensitive and will be generated in the session timezone we set.</p>
<p>So all that to say, with the exception of <code>TIMESTAMP</code> all of the other MYSQL date/time types are just static columns that hold data in the format of a date and or time. There's a lot of misinformation out there about this, that all date times are stored as UTC, specifically the <code>DATETIME</code> column type is often said to operate this way. Because a lot of web and database servers are going to default to UTC and because there are a lot of great datetime standard or third-party libraries out there that make it easy to work in UTC but display local timezones, it's possible to go along thinking MySQL is doing this conversion for us when really it's just the default settings.</p>
<h2 id="daylight-savings"><a href="#daylight-savings" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Daylight savings</h2>
<p>Let's do some more tests on our table,</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-sql"><code>mysql<span class="token operator">></span> <span class="token keyword">truncate</span> <span class="token keyword">table</span> tests<span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.04</span> sec<span class="token punctuation">)</span>
</code></pre></div>
<p>Re-run our inserts</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> tests <span class="token punctuation">(</span>dt_col<span class="token punctuation">,</span> ts_col<span class="token punctuation">,</span> date_col<span class="token punctuation">,</span> time_col<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'2024-10-10'</span><span class="token punctuation">,</span> <span class="token string">'10:10'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> time_zone <span class="token operator">=</span> <span class="token string">'Australia/Sydney'</span><span class="token punctuation">;</span>
</code></pre></div>
<div class="nuxt-content-highlight"><pre class="line-numbers language-sql"><code>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> @<span class="token variable">@GLOBAL.time_zone</span><span class="token punctuation">,</span> @<span class="token variable">@SESSION.time_zone</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------------+---------------------+</span>
<span class="token operator">|</span> @<span class="token variable">@GLOBAL.time_zone</span> <span class="token operator">|</span> @<span class="token variable">@SESSION.time_zone</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------+---------------------+</span>
<span class="token operator">|</span> Australia<span class="token operator">/</span>Sydney   <span class="token operator">|</span> Australia<span class="token operator">/</span>Sydney    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------+---------------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre></div>
<p>mysql> insert into tests (dt_col) values (CONVERT_TZ('2024-10-11 1:00:00', 'UTC', 'Australia/Sydney'));
Query OK, 1 row affected (0.00 sec)</p>
<p>mysql> insert into tests (dt_col) values (CONVERT_TZ('2024-10-11 1:00:00', 'UTC', 'Australia/Brisbane'));
Query OK, 1 row affected (0.00 sec)</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-sql"><code>mysql<span class="token operator">></span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tests<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">---------------------+---------------------+------------+----------+</span>
<span class="token operator">|</span> dt_col              <span class="token operator">|</span> ts_col              <span class="token operator">|</span> date_col   <span class="token operator">|</span> time_col <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------+---------------------+------------+----------+</span>
<span class="token operator">|</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">19</span>:<span class="token number">57</span>:<span class="token number">58</span> <span class="token operator">|</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">19</span>:<span class="token number">57</span>:<span class="token number">58</span> <span class="token operator">|</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">10</span> <span class="token operator">|</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">11</span> <span class="token number">12</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>                <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token boolean">NULL</span>     <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">11</span> <span class="token number">11</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>                <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token boolean">NULL</span>     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------+---------------------+------------+----------+</span>
<span class="token number">3</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre></div>
<h2 id="timezones-vs-utc-offsets"><a href="#timezones-vs-utc-offsets" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Timezones vs UTC offsets</h2>
<p>In the above two sections, we've used a combination of UTC offsets such as +00:00 and named timezones such as <code>Australia/Sydney</code>. At its simplest, the difference between a named timezone and a UTC offset is that a named timezone is a series of UTC offsets based on the rules of the given timezone, i.e. <code>+10:00</code> for the given Sydney example in standard time, <code>+11:00</code> for daylight savings.</p>
<p>The named timezones come from the zoneinfo database on your computer, probably <code>/usr/share/zoneinfo</code> if you run a *nix-y type OS, and it's the compiled version of the human readable timezone text files here <a href="https://www.iana.org/time-zones" rel="nofollow noopener noreferrer" target="_blank">IANA Time Zone Database</a>.</p>
<p>Below is part of the human readable timezone textfile for <code>Australia/Sydney</code>:</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code># New South Wales
# Rule  NAME    FROM    TO  -   IN  ON  AT  SAVE    LETTER/S
Rule    AN  2008    max -   Apr Sun>=1  2:00s   0   S
Rule    AN  2008    max -   Oct Sun>=1  2:00s   1:00    D

# Zone  NAME        STDOFF  RULES   FORMAT  [UNTIL]
Zone Australia/Sydney   10:04:52 -  LMT 1895 Feb
            10:00   Aus AE%sT   1971
            10:00   AN  AE%sT
</code></pre></div>
<p>The <code>Rule</code> lines are referenced by the <code>Zone</code> line for <code>Australia/Sydney</code> which also specifies the standard offset of <code>10:00</code>.</p>
<p>In New South Wales, daylight savings is observed from 2am on the first Sunday in October until 3am on the first Sunday in April.</p>
<p><code>Rule	AN	2008	max	-	Oct	Sun>=1	2:00s	1:00	D</code> says from 2008 until now on the first Sunday <code>Sun>=1</code> in October <code>Oct</code> at 2am <code>2:00s</code> add <code>1:00</code> to the offset for daylight savings.</p>
<p><code>Rule	AN	2008	max	-	Apr	Sun>=1	2:00s	0	S</code> says from 2008 until now on the first Sunday of April <code>Apr	Sun>=1</code> at 2am <code>:00s</code> go back to adding nothing, i.e., no more daylight savings please.</p>
<p>Note from the above that daylight savings ends at 3am, but the second rule for the end of daylight savings shows the same <code>2:00s</code> as the start of daylight savings in October. The s in <code>2:00s</code> is referencing standard time not the daylight time, so because we will still be operating with the +1:00 offset, it will come into effect at 3am daylight savings and take us back to 2am standard.</p>
<h3 id="the-mysql-timezone-table"><a href="#the-mysql-timezone-table" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>The MySQL timezone table</h3>
<p>MySQL sets up timezone tables in its system schema that need to be populated if we want to use named timezones in MySQL queries, MySQL has a tool <code>mysql_tzinfo_to_sql</code> which takes the compiled versions of the timezone files from <code>/usr/share/zoneinfo</code> that are the binary form of the human readable format above and populates those tables with that information.</p>
<p>If you haven't populated these tables, you can only use UTC offsets in functions like <code>CONVERT_TZ</code> and will get an error when using a named timezone.</p>
<h2 id="where-to-deal-with-timezones-the-db-or-the-application-code"><a href="#where-to-deal-with-timezones-the-db-or-the-application-code" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Where to deal with timezones, the db or the application code?</h2>
<p>Most recommendations I've seen around the web are to keep all timezone code in the application. For the most part, I think that is the correct answer, just because of the quality of datetime libraries available to the application over the database and their ease of use. But I think if you were hellbent on doing it in the database that it should be totally possible as long as it is setup correctly with the timezone tables populated and kept up to date. In any case, as with a lot of things in software development, I think the correct choice is to make a choice and then stick with it.</p>
<h2 id="thinking-in-timezones"><a href="#thinking-in-timezones" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Thinking in Timezones</h2>
<p>For all of this information one of the simplest things to do, I think, when working with timezones is to audit your own thinking of how timezones work in our code.</p>
<p>As developers as a collective whole, we kind of suck at date programming. Most of us will take the 'store it as UTC and it'll be all' good advice and think we've done the job. And honestly, most of the time we have. When we're storing <code>createdAt</code> or <code>updatedAt</code> fields, or or scheduling near future events that aren't appointments that cross timezones, everything will work. Even if it technically doesn't <em>really</em>, we might not notice or care because if it's not an appointment or other important date/time combination that could have somebody arrive at a location in the real world expecting some other person or event or service to be there too, it might still go unnoticed even if we do get caught in changing timezones.</p>
<h2 id="interesting-timezone-things"><a href="#interesting-timezone-things" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Interesting Timezone things</h2>
<p>Daylight savings time was sometimes referred to as 'War Time' so in the zoneinfo files you can sometimes see <code>D</code> and <code>S</code> for daylight and standard time replaced with <code>W</code> and <code>P</code> for war and peace time.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code># Rule  NAME    FROM    TO      TYPE    IN      ON      AT      SAVE    LETTER/S
Rule    US      1918    1919    -       Mar     lastSun 2:00    1:00    D
Rule    US      1918    1919    -       Oct     lastSun 2:00    0       S
Rule    US      1942    only    -       Feb     9       2:00    1:00    W # War
Rule    US      1945    only    -       Aug     14      23:00u  1:00    P # Peace
</code></pre></div></div></article></div></div><script defer src="/_nuxt/static/1743752110/2024-06-09-date-and-time-programming/state.js"></script><script src="/_nuxt/141fe53.js" defer></script><script src="/_nuxt/be996ed.js" defer></script><script src="/_nuxt/43ca708.js" defer></script><script src="/_nuxt/3e08e2f.js" defer></script><script src="/_nuxt/3a249ae.js" defer></script>
  </body>
</html>
